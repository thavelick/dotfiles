#!/usr/bin/env python3
import os

url = os.environ.get('QUTE_URL')
if url:
    libreddit = 'libreddit.de'
    new_url = (
        url
        .replace('twitter.com', 'nitter.net')
        .replace('youtube.com', 'yewtu.be')
        .replace('medium.com', 'scribe.rip')
        .replace('www.reddit.com', libreddit)
        .replace('reddit.com', libreddit)
    )

    if new_url != url:
        with open(os.environ['QUTE_FIFO'], 'w') as fifo:
            fifo.write('open %s' % new_url)
